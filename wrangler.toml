name = "betaroutes"
compatibility_date = "2024-12-05"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

# ---------------------------------------------------
# Production environment
# ---------------------------------------------------
[env.production]

[[env.production.durable_objects.bindings]]
name = "TRIP_INDEX_DO"
class_name = "TripIndexSQLv2" # UPDATED to v2
script_name = "trip-index-worker"

[[env.production.durable_objects.bindings]]
name = "PLACES_INDEX_DO"
class_name = "PlacesIndexSQLv2" # UPDATED to v2
script_name = "trip-index-worker"

[[env.production.kv_namespaces]]
binding = "BETA_LOGS_KV"
id = "9551bf35d9cc4f75a5210c52d906da24"

[[env.production.kv_namespaces]]
binding = "BETA_USERS_KV"
id = "569eff477945483283fa854d7bdf6b14"

[[env.production.kv_namespaces]]
binding = "BETA_USER_SETTINGS_KV"
id = "63469d2321704b1ebcc02d01a894e167"

[[env.production.kv_namespaces]]
binding = "BETA_HUGHESNET_KV"
id = "6a0e248bebff430f89b0de3b5dde8aee"

[[env.production.kv_namespaces]]
binding = "BETA_EXPENSES_KV"
id = "7145abd7f89f4eb2bfbfdb84f69d6a5f"

[[env.production.kv_namespaces]]
binding = "BETA_HUGHESNET_ORDERS_KV"
id = "a827fef4c1a84512b7a41a1a167ffbc9"

[[env.production.kv_namespaces]]
binding = "BETA_PLACES_KV"
id = "2030b20c6baa46fe8c7bb620aaf0f8c1"

[[env.production.kv_namespaces]]
binding = "BETA_DIRECTIONS_KV"
id = "5392d9ff847542a29abf58c5f0624011"

[[env.production.kv_namespaces]]
binding = "BETA_SESSIONS_KV"
id = "d395b64dcd0641f5a44d94c5ef5628eb"

[[env.production.kv_namespaces]]
binding = "BETA_MILEAGE_KV"
id = "d5a88eb9bfd4486fbaa26e033e92104f"

# ---------------------------------------------------
# Preview environment
# ---------------------------------------------------
[env.preview]

# Public environment variables (non-sensitive)
# Note: Browser-exposed Maps API keys are ACCEPTABLE here since they're public by design.
# Security is enforced via Google Cloud Console restrictions:
#   - HTTP referrer restrictions (your domain only)
#   - API restrictions (Maps JavaScript API only)
#   - Usage quotas and billing alerts
# For server-only API keys, use: wrangler secret put PRIVATE_GOOGLE_MAPS_API_KEY
[env.preview.vars]
PUBLIC_GOOGLE_MAPS_API_KEY = "AIzaSyC_M5PjI9-Dix0dOr_Sg2bKkXhNAIbr2Xs"

[[env.preview.durable_objects.bindings]]
name = "TRIP_INDEX_DO"
class_name = "TripIndexSQLv2" # UPDATED to v2
script_name = "trip-index-worker"

[[env.preview.durable_objects.bindings]]
name = "PLACES_INDEX_DO"
class_name = "PlacesIndexSQLv2" # UPDATED to v2
script_name = "trip-index-worker"

[[env.preview.kv_namespaces]]
binding = "BETA_LOGS_KV"
id = "babfd9307ecd4a1993a382ebe30c5a16"

[[env.preview.kv_namespaces]]
binding = "BETA_EXPENSES_KV"
id = "7145abd7f89f4eb2bfbfdb84f69d6a5f"

[[env.preview.kv_namespaces]]
binding = "BETA_USERS_KV"
id = "a245706e522b444fa9b67fa9a1b88d6a"

[[env.preview.kv_namespaces]]
binding = "BETA_USER_SETTINGS_KV"
id = "63469d2321704b1ebcc02d01a894e167"

[[env.preview.kv_namespaces]]
binding = "BETA_HUGHESNET_KV"
id = "6a0e248bebff430f89b0de3b5dde8aee"

[[env.preview.kv_namespaces]]
binding = "BETA_HUGHESNET_ORDERS_KV"
id = "a827fef4c1a84512b7a41a1a167ffbc9"

[[env.preview.kv_namespaces]]
binding = "BETA_PLACES_KV"
id = "2030b20c6baa46fe8c7bb620aaf0f8c1"

[[env.preview.kv_namespaces]]
binding = "BETA_DIRECTIONS_KV"
id = "5392d9ff847542a29abf58c5f0624011"

[[env.preview.kv_namespaces]]
binding = "BETA_SESSIONS_KV"
id = "d395b64dcd0641f5a44d94c5ef5628eb"
