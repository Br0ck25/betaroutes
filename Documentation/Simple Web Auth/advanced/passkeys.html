<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-advanced/passkeys" data-has-hydrated=false>
<!-- Mirrored from simplewebauthn.dev/docs/advanced/passkeys by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 26 Dec 2025 17:01:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Passkeys | SimpleWebAuthn</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://simplewebauthn.dev/docs/advanced/passkeys><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Passkeys | SimpleWebAuthn"><meta data-rh=true name=description content=Introduction><meta data-rh=true property=og:description content=Introduction><link data-rh=true rel=icon href=../../img/logo_favicon.png><link data-rh=true rel=canonical href=passkeys.html><link data-rh=true rel=alternate href=passkeys.html hreflang=en><link data-rh=true rel=alternate href=passkeys.html hreflang=x-default><link data-rh=true rel=preconnect href=https://e0fzf1rzxd-dsn.algolia.net/ crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://simplewebauthn.dev/docs/advanced/passkeys","name":"Passkeys","position":1}]}</script><link rel=search type=application/opensearchdescription+xml title=SimpleWebAuthn href=https://simplewebauthn.dev/opensearch.xml><link rel=stylesheet href=../../assets/css/styles.bd7c59d7.css><script src=../../assets/js/runtime_main.87ca4247.js defer></script><script src=../../assets/js/main.5371bc05.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=../../img/logo_favicon.png><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=https://simplewebauthn.dev/><div class=navbar__logo><img src=../../img/logo_favicon.png alt="SimpleWebAuthn Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=../../img/logo_favicon.png alt="SimpleWebAuthn Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SimpleWebAuthn</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=../index.html>Docs</a><a href=https://debugger.simplewebauthn.dev/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Debugger<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/MasterKale/SimpleWebAuthn target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=../index.html>SimpleWebAuthn</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=../index.html>Introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=../simplewebauthn/philosophy.html>Philosophy</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=../packages/browser.html>Packages</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=../packages/browser.html>@simplewebauthn/browser</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=../packages/server.html>@simplewebauthn/server</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=../packages/types.html>@simplewebauthn/types</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=browser-quirks.html>Advanced Guides</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=browser-quirks.html>Browser Quirks</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=example-project.html>Example Project</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=fido-conformance.html>FIDO Conformance</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=passkeys.html>Passkeys</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=supported-devices.html>Supported Devices</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=server/custom-challenges.html>@simplewebauthn/server</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=server/custom-challenges.html>Custom Challenges</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=server/custom-user-ids.html>Custom User IDs</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=server/metadata-service.html>Metadata Service</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=server/secure-payment-confirmation.html>Secure Payment Confirmation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=server/settings-service.html>Settings Service</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=prf.html>Danger Zone</a></div></ul></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=https://simplewebauthn.dev/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Advanced Guides</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Passkeys</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Passkeys</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id=introduction>Introduction<a href=#introduction class=hash-link aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>Passkeys represent a compelling WebAuthn-based alternative to the timeless combination of "password + second-factor" that we all suffer through.</p>
<p>Passkeys are phishing-resistant, are unique across every website, and can help users maintain account access after device loss.</p>
<p>Additionally, passkeys generated by the three main platform authenticator vendors (Apple, Google, and Microsoft) are automatically synchronized across a user's devices by their respective cloud account. That means there's finally an easy way for users to regain account access if they happen to lose or trade in their device. There's never been a better time to update your authentication to use WebAuthn.</p>
<p>The following options are ones you should set when calling SimpleWebAuthn's methods to ensure that your site is ready for passkeys.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=prerequisites>Prerequisites<a href=#prerequisites class=hash-link aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>Below are the three platform authenticator vendors and known minimum versions of their software needed for full passkey support:</p>
<p><strong>Apple:</strong> iOS 16, macOS 13 (Ventura, Safari-only)</p>
<p><strong>Google:</strong> Android 9+</p>
<p><strong>Microsoft:</strong> TBD</p>
<p>FIDO2 security keys are unaffected. They will continue to produce credentials that are hardware bound, and most already support discoverable credentials.</p>
<p>Note that "passkey support" is still "WebAuthn support". Passkeys do not represent a breaking change in how WebAuthn is invoked. Rather they are WebAuthn credentials that can have their private key material synchronized across devices outside the influence of the WebAuthn API. The options below are optimizations for those Relying Parties that want to aim for passkey support as they become more common.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=server>Server<a href=#server class=hash-link aria-label="Direct link to Server" title="Direct link to Server">​</a></h2>
<p>The high-level strategy here is to instruct the <strong>authenticator</strong> to do the following during registration and authentication:</p>
<ol>
<li><strong>Generate a discoverable credential</strong>. The authenticator must generate and internally store a credential mapped to (<code>rpID</code> + <code>userID</code>).</li>
<li><strong>Perform user verification</strong>. The authenticator must provide two authentication factors within a single authenticator interaction.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=generateregistrationoptions><code>generateRegistrationOptions()</code><a href=#generateregistrationoptions class=hash-link aria-label="Direct link to generateregistrationoptions" title="Direct link to generateregistrationoptions">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> generateRegistrationOptions </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>from</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'@simplewebauthn/server'</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> options </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>generateRegistrationOptions</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  authenticatorSelection</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// "Discoverable credentials" used to be called "resident keys". The</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// old name persists in the options passed to `navigator.credentials.create()`.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    residentKey</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'required'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    userVerification</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'preferred'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p>User verification is <code>"preferred"</code> here because it smooths out potential frictions if a user attempts to use passkeys on a device without a biometric sensor. See <a href=https://passkeys.dev/docs/use-cases/bootstrapping/#a-note-about-user-verification target=_blank rel="noopener noreferrer">"A note about user verification" on passkeys.dev</a> for more context. The actual enforcement of user verification being required for proper passwordless support happens below during response verification.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=verifyregistrationresponse><code>verifyRegistrationResponse()</code><a href=#verifyregistrationresponse class=hash-link aria-label="Direct link to verifyregistrationresponse" title="Direct link to verifyregistrationresponse">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> verification </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>verifyRegistrationResponse</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  requireUserVerification</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>A word of caution about user verification</div><div class=admonitionContent_BuS1><p><code>requireUserVerification</code> is set to <code>false</code> above because many websites can be just fine using passkeys without user verification! The phishing resistant properties of WebAuthn elevates passkeys to a higher level of protection than username+password+2fa, and thus passkeys are not necessarily beholden to the same "multiple factors of auth" rules that came before them.<p>However <em>some websites</em>, for various regulatory reasons, may require multiple factors of authentication to be provided. If you are a developer of such a website then you should set <code>userVerification: 'required'</code> when calling <code>generateRegistrationOptions()</code>, and specify <code>requireUserVerification: true</code> when calling <code>verifyRegistrationResponse()</code>.</div></div>
<p>Make sure to save the <code>transports</code> value returned from <strong>@simplewebauthn/browser</strong>'s <code>startRegistration()</code> method too. Advanced WebAuthn functionality like cross-device auth (i.e. authenticating into a website displayed in Chrome on Windows by using your iPhone) is hard to design good UX around. You can use the browser to figure out when it is available by including each credential's <code>transports</code> in the <code>allowCredentials</code> array passed later into <code>generateAuthenticateOptions()</code>. They will help the browser figure out when a credential might enable a user to log in using new technology that wasn't available before.</p>
<p>Signs that a passkey were created include the following values returned from this method:</p>
<ul>
<li><code>verification.registrationInfo.credentialDeviceType</code>: <code>'multiDevice'</code> means the credential will be backed up for use on multiple devices within the same platform vendor cloud ecosystem (e.g. only for use on Apple devices sharing an iCloud account)</li>
<li><code>verification.registrationInfo.credentialBackedUp</code>: <code>true</code> means the private key material has been backed up to the user's cloud account. For all intents and purposes this will always be <code>true</code> when <code>credentialDeviceType</code> above is <code>'multiDevice'</code></li>
</ul>
<p><strong>These values can be stored in the database for a given credential</strong> for later reference, to help with understanding rate of adoption of passkeys by your users and adjust your UX accordingly.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=generateauthenticationoptions><code>generateAuthenticationOptions()</code><a href=#generateauthenticationoptions class=hash-link aria-label="Direct link to generateauthenticationoptions" title="Direct link to generateauthenticationoptions">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> options </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>generateAuthenticationOptions</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  userVerification</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>'preferred'</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  allowCredentials</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<p><code>userVerification</code> is <code>"preferred"</code> here because it smooths out potential frictions if a user attempts to use passkeys on a device without a biometric sensor. See <a href=https://passkeys.dev/docs/use-cases/bootstrapping/#a-note-about-user-verification target=_blank rel="noopener noreferrer">"A note about user verification" on passkeys.dev</a> for more context. The actual enforcement of user verification being required for proper passwordless support happens below during response verification.</p>
<p><code>allowCredentials</code> can also be set to <code>[]</code> to allow the user to choose from any discoverable credentials they have for the site when calling <code>startAuthentication()</code> after the user clicks a "Sign in with a passkey" button. This "flips the script" on the authentication ceremony by allowing the user to generate a WebAuthn response with a registered passkey, which then tells the RP which account the user wants to log into <strong>without the user needing to provide an account identifier beforehand!</strong> After verifying the response and confirming it recognizes the credential then the RP should create a session for the internal user record that is associated with the response's <a href=https://w3c.github.io/webappsec-credential-management/#dom-credential-id target=_blank rel="noopener noreferrer"><code>id</code></a> (and/or <a href=https://www.w3.org/TR/webauthn-2/#dom-authenticatorassertionresponse-userhandle target=_blank rel="noopener noreferrer"><code>userHandle</code></a> when available.)</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_BuS1><p>Setting <code>allowCredentials: []</code> when calling <code>generateAuthenticationOptions()</code> is <strong>OPTIONAL</strong> if you are using <strong>@simplewebauthn/browser</strong>'s <code>startAuthentication()</code> method with its second positional <code>useBrowserAutofill</code> argument set to <code>true</code>; <code>startAuthentication()</code> will take care of this for you in this configuration.<p>See the <a href=../packages/browser.html#browser-autofill-conditional-ui>Conditional UI section of the docs for <code>startAuthentication()</code></a> for more information.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=verifyauthenticationresponse><code>verifyAuthenticationResponse()</code><a href=#verifyauthenticationresponse class=hash-link aria-label="Direct link to verifyauthenticationresponse" title="Direct link to verifyauthenticationresponse">​</a></h3>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> authVerify </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>await</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>verifyAuthenticationResponse</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">  requireUserVerification</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>false</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>A word of caution about user verification</div><div class=admonitionContent_BuS1><p><code>requireUserVerification</code> is set to <code>false</code> above because many websites can be just fine using passkeys without user verification! The phishing resistant properties of WebAuthn elevates passkeys to a higher level of protection than username+password+2fa, and thus passkeys are not necessarily beholden to the same "multiple factors of auth" rules that came before them.<p>However <em>some websites</em>, for various regulatory reasons, may require multiple factors of authentication to be provided. If you are a developer of such a website then you should set <code>userVerification: 'required'</code> when calling <code>generateAuthenticationOptions()</code>, and specify <code>requireUserVerification: true</code> when calling <code>verifyAuthenticationResponse()</code>.</div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=remembering-challenges>Remembering challenges<a href=#remembering-challenges class=hash-link aria-label="Direct link to Remembering challenges" title="Direct link to Remembering challenges">​</a></h3>
<p>The <code>generateRegistrationOptions()</code> and <code>generateAuthenticationOptions()</code> methods both return a <code>challenge</code> value that will get signed by an authenticator and returned in the authenticator's response. The goal is for these <code>challenge</code> values to get passed back into the <code>verifyRegistrationResponse()</code> and <code>verifyAuthenticationResponse()</code> methods respectively as their <code>expectedChallenge</code> arguments.</p>
<p>The question then becomes, "how do I keep track of these challenges between creating the options and verifying the response when the user isn't yet logged in?" This is particularly tricky with passkeys and conditional UI. During this "usernameless" authentication the user is encouraged to present <em>any</em> WebAuthn credential they possess for the site, instead of being told the the discrete list of credentials that they're able to use. If the user can't be known ahead of time, then how can the RP tell the user which credentials they can use for authentication?</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>caution</div><div class=admonitionContent_BuS1><p>The following advice is <strong>high-level</strong> and avoids referencing specific frameworks and libraries (beyond SimpleWebAuthn) because every project is different. Please read the suggested course of action below, and then consider how it might be adapted to your project's architecture.</div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=authentication>Authentication<a href=#authentication class=hash-link aria-label="Direct link to Authentication" title="Direct link to Authentication">​</a></h4>
<p>One technique for tracking the challenge between options generation and response verification is to start a "session" for any user who views your login page.</p>
<p>First, assign a random <code>sessionID</code> HTTP-only cookie when the page first loads. When the user attempts to authenticate, call <strong>server</strong>'s <code>generateAuthenticationOptions()</code> like normal and temporarily store the challenge somewhere (I like to use <a href=https://redis.io/commands/setex/ target=_blank rel="noopener noreferrer">Redis' setex()</a> and store challenges for five minutes [300000 ms]) with the <code>sessionID</code> as the key and <code>options.challenge</code> as the value. Return the options to the page and await a response.</p>
<p>When the response comes in, look up the <code>challenge</code> by the <code>sessionID</code> cookie and attempt verification, with <code>challenge</code> passed in as <code>expectedChallenge</code> to <code>verifyAuthenticationResponse()</code>. <strong>Make sure to delete the challenge so it can't be reused, even if verification fails, to prevent replay attacks!</strong> If the authentication response succeeds then log the user in.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=registration>Registration<a href=#registration class=hash-link aria-label="Direct link to Registration" title="Direct link to Registration">​</a></h4>
<p>New user registration is a bit unique in that it requires "bootstrapping" the creation of the user's session, ideally after verifying that the new user is not a bot. RP's are thus recommended to seek verification of ownership of a unique "point of contact" that the new user has signed up for outside of your service (the point of contact can also help with account recovery in case of device loss.)</p>
<p>A <a href=https://postmarkapp.com/blog/magic-links target=_blank rel="noopener noreferrer">"magic link"</a> sent to an email address, then, is a particularly simple solution that can perform double duty:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>Magic Link Example</div><div class=admonitionContent_BuS1><p><a href="https://example.com/register?token=mHaikFuCzlQSfmVlIhSH6TY2IRwRYMcj" target=_blank rel="noopener noreferrer">https://example.com/register?token=mHaikFuCzlQSfmVlIhSH6TY2IRwRYMcj</a></div></div>
<ol>
<li>Receiving the magic link confirms that the user is signing up with a valid email account that they have access to, and to which you can send correspondence for account management</li>
<li>Clicking the magic link sends back the random, one-time "authorization code" that initiates a registration ceremony</li>
</ol>
<p>Once the user clicks the link, you can reasonably assume that the user is not a bot and can therefore register an authenticator to their new account.</p>
<p>Challenge management during registration then looks very similar to the steps outlined above in the <strong>Authentication</strong> section, with one slight change: the "session" would be established just before calling <code>generateRegistrationOptions()</code>, <strong>after verifying that the authorization code in the URL is valid and hasn't been used before</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=browser>Browser<a href=#browser class=hash-link aria-label="Direct link to Browser" title="Direct link to Browser">​</a></h2>
<p>There isn't a whole lot that changes in how you call the browser methods if you want to support passkeys, as passkeys don't involve any changes in how WebAuthn is ultimately invoked.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=startregistration><code>startRegistration()</code><a href=#startregistration class=hash-link aria-label="Direct link to startregistration" title="Direct link to startregistration">​</a></h3>
<p>No changes are required.</p>
<p>...Unless you are interested in leveraging automatic passkey registration, a.k.a. "Conditional Create". Conditional Create will attempt to register a passkey with a user's password manager after a successful password authentication, assuming the password manager is also a passkey provider. This will allow the user to use a passkey instead for subsequent authentications.</p>
<p>See the <a href=../packages/browser.html#auto-register-conditional-create>Auto Register section of the docs for <code>startRegistration()</code></a> for more information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=startauthentication><code>startAuthentication()</code><a href=#startauthentication class=hash-link aria-label="Direct link to startauthentication" title="Direct link to startauthentication">​</a></h3>
<p>No changes are required.</p>
<p>...Unless you are interested in leveraging browser autofill for passkey authentication, a.k.a. "Conditional UI". Conditional UI gives the browser a chance to find and suggest to the user credentials that they can select to then present to you for authentication, all via the browser's native autofill API.</p>
<p>If this interests you, then please see the <a href=../packages/browser.html#browser-autofill-conditional-ui>Browser Autofill section of the docs for <code>startAuthentication()</code></a> as there is a bit of setup required to get it all working.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/MasterKale/SimpleWebAuthn-homepage/edit/master/docs/advanced/passkeys.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=fido-conformance.html><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>FIDO Conformance</div></a><a class="pagination-nav__link pagination-nav__link--next" href=supported-devices.html><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Supported Devices</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#introduction class="table-of-contents__link toc-highlight">Introduction</a><li><a href=#prerequisites class="table-of-contents__link toc-highlight">Prerequisites</a><li><a href=#server class="table-of-contents__link toc-highlight">Server</a><ul><li><a href=#generateregistrationoptions class="table-of-contents__link toc-highlight"><code>generateRegistrationOptions()</code></a><li><a href=#verifyregistrationresponse class="table-of-contents__link toc-highlight"><code>verifyRegistrationResponse()</code></a><li><a href=#generateauthenticationoptions class="table-of-contents__link toc-highlight"><code>generateAuthenticationOptions()</code></a><li><a href=#verifyauthenticationresponse class="table-of-contents__link toc-highlight"><code>verifyAuthenticationResponse()</code></a><li><a href=#remembering-challenges class="table-of-contents__link toc-highlight">Remembering challenges</a></ul><li><a href=#browser class="table-of-contents__link toc-highlight">Browser</a><ul><li><a href=#startregistration class="table-of-contents__link toc-highlight"><code>startRegistration()</code></a><li><a href=#startauthentication class="table-of-contents__link toc-highlight"><code>startAuthentication()</code></a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>
        <strong>Copyright © 2025 Matthew Miller. Built with Docusaurus.</strong>
        <sub>FIDO® is a trademark of FIDO Alliance, Inc.</sub>
        <sub><a href=https://a0.to/signup/simplewebauthn>Sponsored by Auth0 by Okta</a></sub>
      </div></div></div></footer></div><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"5c31f56a44644210823ca8546d62c9d2","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
